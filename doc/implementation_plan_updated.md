# 情報収集エージェント 実装計画（2024年3月更新版）

## 1. 概要

本ドキュメントは、情報収集エージェントの実装計画の最新版です。これまでの進捗状況を踏まえ、残りの実装タスクと今後の優先順位を示します。

## 2. 現在の実装状況

### 2.1 実装済みコンポーネント

1. **プロジェクト基盤**
   - プロジェクト構造およびディレクトリ構成
   - TypeScript設定、ESLint、Prettierなどの開発環境
   - 設定ファイル (config/default.yml)
   - 環境変数管理システム (src/config/env-manager.ts)

2. **ユーティリティ**
   - エラーハンドラー (src/utils/error-handler.ts)
   - ロギング機能 (src/utils/logger.ts)
   - 型定義 (src/utils/types.ts)

3. **設定管理**
   - 設定ローダー (src/config/config-loader.ts)
   - 設定スキーマ (src/config/config-schema.ts)
   - 環境変数管理 (src/config/env-manager.ts)

4. **AIモデル基盤**
   - モデルインターフェース (src/models/interfaces/ai-model.ts)
   - ベースモデル (src/models/interfaces/base-model.ts)
   - モデルセレクタ (src/models/selector.ts)
   - Anthropicモデル (src/models/providers/anthropic-model.ts) - 実装済み
   - OpenAIモデル (src/models/providers/openai-model.ts) - 実装済み
   - Googleモデル (src/models/providers/google-model.ts) - 実装済み

5. **エージェント**
   - メインエージェント (src/agents/main-agent.ts)
   - 検索エージェント (src/agents/search-agent.ts)
   - 情報処理エージェント (src/agents/info-processor.ts)

6. **テスト**
   - 単体テスト (エラーハンドラー、各エージェント、環境変数管理)
   - モデルテスト (各AIモデルプロバイダー)
   - テスト実行スクリプト (PowerShell, Bash)

### 2.2 現在の課題と問題点

1. **検索機能の未実装**
   - 検索機能は現在モックのみ
   - 実際の検索APIとの連携が必要

2. **コンテンツ処理の未実装**
   - ウェブページからのコンテンツ抽出機能が未実装
   - 情報統合機能が未実装

3. **テストカバレッジの不足**
   - モデルテストのカバレッジが約18%と低い
   - エラーケースのテストが不十分

4. **CLIインターフェースの未完成**
   - コマンドライン引数処理が基本的なもののみ
   - インタラクティブな進捗表示などが未実装

## 3. 実装計画（2024年3月更新版）

### フェーズ1: 検索機能の実装 (2-3週間)

| タスクID | タスク名 | 詳細 | 優先度 | 工数 | 担当者 |
|---------|---------|------|-------|------|-------|
| 1.1 | Google検索API連携 | Google Custom Search APIとの連携実装 | 高 | 12時間 | 開発者A |
| 1.3 | 検索結果のパース | 各検索APIからの結果を共通形式に変換 | 高 | 8時間 | 開発者A |
| 1.4 | 検索キャッシュ実装 | 検索結果のキャッシュ機能実装 | 中 | 6時間 | 開発者B |
| 1.5 | 検索レート制限機能 | API制限に対応したレート制限実装 | 高 | 4時間 | 開発者A |
| 1.6 | 検索単体テスト | 検索機能の単体テスト実装 | 高 | 8時間 | QAエンジニア |
| 1.7 | モデル・検索連携テスト | モデルと検索の連携テスト | 中 | 6時間 | QAエンジニア |

**注記**: Bing検索APIはマイクロソフト社により廃止されたため、実装を取りやめました。Google検索APIのみを使用します。

**成果物**:
- 実際のAPIを使用した検索機能
- 検索結果のキャッシュ機能
- 検索機能のテストスイート

### フェーズ2: コンテンツ処理の実装 (3-4週間)

| タスクID | タスク名 | 詳細 | 優先度 | 工数 | 担当者 |
|---------|---------|------|-------|------|-------|
| 2.1 | ウェブコンテンツ抽出 | HTML/PDFからのテキスト抽出機能 | 高 | 16時間 | 開発者A |
| 2.2 | コンテンツクリーニング | 不要なHTML要素の除去、テキスト正規化 | 高 | 8時間 | 開発者B |
| 2.3 | メタデータ抽出 | タイトル、著者、日付などのメタデータ抽出 | 中 | 12時間 | 開発者A |
| 2.4 | コンテンツ要約機能 | AIを活用した長文コンテンツの要約 | 高 | 12時間 | 開発者B |
| 2.5 | 情報統合機能 | 複数ソースからの情報統合ロジック | 高 | 16時間 | 開発者A |
| 2.6 | レポート生成機能 | 構造化されたレポート生成機能 | 中 | 12時間 | 開発者B |
| 2.7 | コンテンツ処理テスト | 抽出・統合機能のテスト | 高 | 8時間 | QAエンジニア |

**成果物**:
- ウェブコンテンツからの情報抽出機能
- 情報要約と統合機能
- 構造化レポート生成機能

### フェーズ3: RAG機能の強化 (2-3週間)

| タスクID | タスク名 | 詳細 | 優先度 | 工数 | 担当者 |
|---------|---------|------|-------|------|-------|
| 3.1 | コンテキスト処理強化 | 長文コンテキストのチャンク分割処理 | 高 | 8時間 | 開発者A |
| 3.2 | 関連性スコアリング | 検索結果の関連性評価機能 | 中 | 12時間 | 開発者B |
| 3.3 | 情報重複検出 | 検索結果の重複検出・マージ機能 | 中 | 8時間 | 開発者A |
| 3.4 | ファクトチェック機能 | 情報の一貫性検証機能 | 低 | 16時間 | 開発者B |
| 3.5 | 多段階RAG処理 | 初期検索→詳細検索の多段階処理 | 中 | 12時間 | 開発者A |
| 3.6 | RAG機能テスト | 強化されたRAG機能のテスト | 高 | 8時間 | QAエンジニア |

**成果物**:
- 高度なコンテキスト処理
- 関連性評価と重複検出
- 多段階RAG処理フロー

### フェーズ4: CLI/UI改善とドキュメント (1-2週間)

| タスクID | タスク名 | 詳細 | 優先度 | 工数 | 担当者 |
|---------|---------|------|-------|------|-------|
| 4.1 | CLIインターフェース強化 | コマンド引数処理の完成 | 高 | 8時間 | 開発者B |
| 4.2 | 進捗表示機能 | 処理進捗のインタラクティブ表示 | 中 | 6時間 | 開発者A |
| 4.3 | ヘルプテキスト整備 | 詳細なヘルプと使用例の作成 | 中 | 4時間 | 開発者B |
| 4.4 | ユーザーマニュアル作成 | 詳細な利用方法ドキュメント | 中 | 12時間 | ドキュメント担当 |
| 4.5 | API参照ドキュメント | 開発者向けAPI参照作成 | 低 | 8時間 | ドキュメント担当 |
| 4.6 | チュートリアル作成 | 主要ユースケースのチュートリアル | 中 | 8時間 | ドキュメント担当 |

**成果物**:
- 完成したCLIインターフェース
- ユーザーマニュアルとチュートリアル
- 開発者向けドキュメント

## 4. マイルストーンとタイムライン

### マイルストーン1: 検索機能完成 (2024年4月上旬)
- 実API連携による検索機能の実装
- キャッシュとレート制限機能の実装
- 検索機能のテスト完了

### マイルストーン2: コンテンツ処理完成 (2024年5月上旬)
- ウェブコンテンツ抽出と処理機能
- 情報統合と要約機能
- コンテンツ処理のテスト完了

### マイルストーン3: RAG機能強化 (2024年5月下旬)
- 高度なコンテキスト処理
- 関連性評価と情報検証
- RAG機能のテスト完了

### マイルストーン4: MVP完成 (2024年6月中旬)
- CLIインターフェース完成
- ドキュメント整備
- ベータ版リリース

## 5. リソース計画

### 人員リソース
- 開発者A: フルタイム (週40時間)
- 開発者B: パートタイム (週20時間)
- QAエンジニア: パートタイム (週15時間)
- ドキュメント担当: パートタイム (週10時間)

### 技術リソース
- 開発環境: VS Code + TypeScript
- CI/CD: GitHub Actions
- テスト環境: Jest
- APIアクセス: 各種検索API、AIモデルAPI

## 6. リスク管理

| リスク | 影響度 | 可能性 | 対策 |
|-------|-------|-------|------|
| API制限・変更 | 高 | 中 | 適切なレート制限、エラーハンドリング強化、フォールバックメカニズム |
| テスト難易度 | 中 | 高 | モックの活用、テスト環境の分離、自動テストの充実 |
| スケジュール遅延 | 中 | 中 | タスクの優先順位付け、スコープの明確化、定期的な進捗確認 |
| 技術的複雑さ | 高 | 中 | 設計レビュー、コードレビューの徹底、技術検証の先行実施 |

## 7. 技術的負債管理

| 負債項目 | 影響 | 対応計画 |
|---------|------|---------|
| テストカバレッジ不足 | コード品質低下 | フェーズごとにカバレッジ目標設定、CIでのカバレッジチェック |
| タイプ定義の不整合 | バグの原因 | 型システムの強化、厳格なリンター設定 |
| エラー処理の不均一 | 安定性低下 | 統一的なエラー処理パターン適用、エラーケースのテスト |
| ドキュメント更新遅延 | 保守性低下 | ドキュメント更新チェックをPRプロセスに組み込み |

## 8. まとめ

現在の実装状況を踏まえ、本プロジェクトは基盤部分の実装が完了し、AIモデル連携も実現しています。今後は実際の検索API連携、コンテンツ処理、高度なRAG機能の実装を経て、MVPの完成を目指します。

本計画は開発の進捗に応じて定期的に見直し、更新を行います。 